BACKUP ~spontaneous_casting/backup~
AUTHOR ~Pecca~
VERSION ~v1.32~

LANGUAGE
	~English~ ~spontaneous_casting/tra~ ~spontaneous_casting/tra/english.tra~
LANGUAGE 
	~Polski (by Cahir)~ ~spontaneous_casting/tra/english.tra~ ~spontaneous_casting/tra/polish.tra~
LANGUAGE 
	~Cesky~	~spontaneous_casting/tra/english.tra~ ~spontaneous_casting/tra/czech.tra~
LANGUAGE 
	~Italian (by Aedan)~	~spontaneous_casting/tra/english.tra~ ~spontaneous_casting/tra/italian.tra~
	
/////////////////////////////////////////////////////////////////////////////////
////// SPONTANEOUS CASTING
/////////////////////////////////////////////////////////////////////////////////

BEGIN @101

REQUIRE_PREDICATE GAME_IS ~bgee bg2ee iwdee eet~ @100

STRING_SET ~23797~ @99

COPY ~Spontaneous_Casting/content/rgspheal.spl~ ~override~
  	SAY NAME1 @1
  	SAY UNIDENTIFIED_DESC @2

COPY ~Spontaneous_Casting/content/rgspharm.spl~ ~override~
  	SAY NAME1 @3
  	SAY UNIDENTIFIED_DESC @4

COPY ~Spontaneous_Casting/content/rgspb01.spl~ ~override~
  	SAY NAME1 @5
  	SAY UNIDENTIFIED_DESC @6

COPY ~Spontaneous_Casting/content/rgspb02.spl~ ~override~
  	SAY NAME1 @7
  	SAY UNIDENTIFIED_DESC @8

COPY ~Spontaneous_Casting/content/rgspb03.spl~ ~override~
  	SAY NAME1 @9
  	SAY UNIDENTIFIED_DESC @10

COPY ~Spontaneous_Casting/content/rgspa02.spl~ ~override~
  	SAY NAME1 @11
  	SAY UNIDENTIFIED_DESC @12

COPY ~Spontaneous_Casting/content/rgspsumm.spl~ ~override~
  	SAY NAME1 @13
  	SAY UNIDENTIFIED_DESC @14

COPY ~Spontaneous_Casting/content/rgspc01.spl~ ~override~
  	SAY NAME1 @15
  	SAY UNIDENTIFIED_DESC @16

COPY ~Spontaneous_Casting/content/rgspc02.spl~ ~override~
  	SAY NAME1 @17
  	SAY UNIDENTIFIED_DESC @18

COPY ~Spontaneous_Casting/content/rgspc03.spl~ ~override~
  	SAY NAME1 @19
  	SAY UNIDENTIFIED_DESC @20

COPY ~Spontaneous_Casting/content/rgspb01.itm~ ~override~
  	SAY NAME2 @5

COPY ~Spontaneous_Casting/content/rgspb02.itm~ ~override~
  	SAY NAME2 @7

COPY ~Spontaneous_Casting/content/rgspb03.itm~ ~override~
  	SAY NAME2 @9

COPY ~Spontaneous_Casting/content/rgspcast.spl~ ~override~
COPY ~Spontaneous_Casting/content/rgspc01.2da~ ~override~
COPY ~Spontaneous_Casting/content/rgspc02.2da~ ~override~
COPY ~Spontaneous_Casting/content/rgspc03.2da~ ~override~
COPY ~Spontaneous_Casting/content/rgspa02b.bam~ ~override~
COPY ~Spontaneous_Casting/content/rgspa02c.bam~ ~override~
COPY ~Spontaneous_Casting/content/rgspb02b.bam~ ~override~
COPY ~Spontaneous_Casting/content/rgspb02c.bam~ ~override~

ACTION_IF GAME_IS ~bgee bg2ee eet~ THEN BEGIN
COPY ~Spontaneous_Casting/content/rgspc01b.bam~ ~override~
COPY ~Spontaneous_Casting/content/rgspc01c.bam~ ~override~
COPY ~Spontaneous_Casting/content/rgspc02b.bam~ ~override~
COPY ~Spontaneous_Casting/content/rgspc02c.bam~ ~override~
COPY ~Spontaneous_Casting/content/rgspc03b.bam~ ~override~
COPY ~Spontaneous_Casting/content/rgspc03c.bam~ ~override~
COPY ~Spontaneous_Casting/content/rgspsumm.bam~ ~override~
END

ACTION_IF GAME_IS ~iwdee~ THEN BEGIN
COPY ~Spontaneous_Casting/iwd_bam/rgspc01b.bam~ ~override~
COPY ~Spontaneous_Casting/iwd_bam/rgspc01c.bam~ ~override~
COPY ~Spontaneous_Casting/iwd_bam/rgspc02b.bam~ ~override~
COPY ~Spontaneous_Casting/iwd_bam/rgspc02c.bam~ ~override~
COPY ~Spontaneous_Casting/iwd_bam/rgspc03b.bam~ ~override~
COPY ~Spontaneous_Casting/iwd_bam/rgspc03c.bam~ ~override~
COPY ~Spontaneous_Casting/iwd_bam/rgspsumm.bam~ ~override~
END

COPY ~Spontaneous_Casting/content/rgspcast.bam~ ~override~
COPY ~Spontaneous_Casting/content/rgspharm.bam~ ~override~
COPY ~Spontaneous_Casting/content/rgspheal.bam~ ~override~
COPY ~Spontaneous_Casting/content/rgsummon.bam~ ~override~
COPY ~Spontaneous_Casting/content/rgsummon.vvc~ ~override~
COPY ~Spontaneous_Casting/content/rgspc01.eff~ ~override~
COPY ~Spontaneous_Casting/content/rgspc02.eff~ ~override~
COPY ~Spontaneous_Casting/content/rgspc03.eff~ ~override~
COPY ~Spontaneous_Casting/content/rgspharm.eff~ ~override~
COPY ~Spontaneous_Casting/content/rgspheal.eff~ ~override~
COPY ~Spontaneous_Casting/content/rgwolfsu.cre~ ~override~

COPY_EXISTING ~spanim1.eff~ ~override~
	WRITE_SHORT 0x1c ~20~

ACTION_IF GAME_IS ~bgee bg2ee eet~ THEN BEGIN
APPEND ~CLABPR01.2da~
~ABILIRG1 AP_RGSPCAST **** GA_RGSPA02 **** GA_RGSPB03 **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** ****~

APPEND ~CLABPR01.2da~
~ABILIRG2 GA_RGSPB01 **** GA_RGSPB02 **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** ****~

APPEND ~CLABDR01.2da~
~ABILIRG1 GA_RGSPSUMM **** GA_RGSPC02 **** GA_RGSPC03 **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** ****~

APPEND ~CLABDR01.2da~
~ABILIRG2 GA_RGSPC01 **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** ****~

COPY_EXISTING - ~KITLIST.2DA~ ~override~
  PRETTY_PRINT_2DA
  COUNT_2DA_ROWS 10 "cntrow"
  FOR (cnt = 0; cnt < "%cntrow%"; cnt = cnt + 1) BEGIN
    READ_2DA_ENTRY cnt 5 10 "clab"
    READ_2DA_ENTRY cnt 8 10 "class"
    PATCH_IF (IS_AN_INT ~%class%~) AND (FILE_EXISTS_IN_GAME ~%clab%.2DA~) BEGIN
      INNER_ACTION BEGIN
        ACTION_IF (class = 3) AND (NOT FILE_CONTAINS_EVALUATED (~%clab%.2DA~ ~RGSPCAST~)) BEGIN
          PRINT ~Patching %clab%.2DA~
          APPEND ~%clab%.2DA~
          ~ABILIRG1 AP_RGSPCAST **** GA_RGSPA02 **** GA_RGSPB03 **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** ****~
          APPEND ~%clab%.2DA~
          ~ABILIRG2 GA_RGSPB01 **** GA_RGSPB02 **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** ****~
        END ELSE ACTION_IF (class = 11) AND (NOT FILE_CONTAINS_EVALUATED (~%clab%.2DA~ ~RGSPSUMM~)) BEGIN
          PRINT ~Patching %clab%.2DA~
          APPEND ~%clab%.2DA~
          ~ABILIRG1 GA_RGSPSUMM **** GA_RGSPC02 **** GA_RGSPC03 **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** ****~
          APPEND ~%clab%.2DA~
          ~ABILIRG2 GA_RGSPC01 **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** ****~
		END
      END
    END
  END
END

ACTION_IF GAME_IS ~iwdee~ THEN BEGIN
APPEND ~CLABPR01.2da~
~ABILIRG1 AP_RGSPCAST **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** ****~

APPEND ~CLABDR01.2da~
~ABILIRG1 GA_RGSPSUMM **** GA_RGSPC02 **** GA_RGSPC03 **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** ****~

APPEND ~CLABDR01.2da~
~ABILIRG2 GA_RGSPC01 **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** ****~

COPY_EXISTING - ~KITLIST.2DA~ ~override~
  PRETTY_PRINT_2DA
  COUNT_2DA_ROWS 10 "cntrow"
  FOR (cnt = 0; cnt < "%cntrow%"; cnt = cnt + 1) BEGIN
    READ_2DA_ENTRY cnt 5 10 "clab"
    READ_2DA_ENTRY cnt 8 10 "class"
    PATCH_IF (IS_AN_INT ~%class%~) AND (FILE_EXISTS_IN_GAME ~%clab%.2DA~) BEGIN
      INNER_ACTION BEGIN
        ACTION_IF (class = 3) AND (NOT FILE_CONTAINS_EVALUATED (~%clab%.2DA~ ~RGSPCAST~)) BEGIN
          PRINT ~Patching %clab%.2DA~
          APPEND ~%clab%.2DA~
          ~ABILIRG1 AP_RGSPCAST **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** ****~
        END ELSE ACTION_IF (class = 11) AND (NOT FILE_CONTAINS_EVALUATED (~%clab%.2DA~ ~RGSPSUMM~)) BEGIN
          PRINT ~Patching %clab%.2DA~
          APPEND ~%clab%.2DA~
          ~ABILIRG1 GA_RGSPSUMM **** GA_RGSPC02 **** GA_RGSPC03 **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** ****~
          APPEND ~%clab%.2DA~
          ~ABILIRG2 GA_RGSPC01 **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** ****~
		END
      END
    END
  END
END

DEFINE_PATCH_FUNCTION ~FJ_SPL_ITM_REINDEX~ BEGIN

PATCH_IF !(~%SOURCE_FILE%~ STRING_MATCHES_REGEXP ~^.+\.spl~) BEGIN
  hs = 0x28
  WRITE_LONG 0xc ~-1~ //Identified name
  WRITE_LONG 0x54 ~-1~ //Identified description
  PATCH_FOR_EACH tz IN 0x44 0x48 0x58 0x5c BEGIN
    WRITE_LONG tz 0
  END
END ELSE PATCH_IF !(~%SOURCE_FILE%~ STRING_MATCHES_REGEXP ~^.+\.itm~) BEGIN
  hs = 0x38
END
READ_LONG 0x64 hf //Extended header offset
READ_SHORT 0x68 hc //Extended header count
READ_LONG 0x6a fb //Feature block table offset
READ_SHORT 0x70 fc //Feature block count
PATCH_IF ((hf > fb) AND (hc > 0)) BEGIN // Ardanis: fixed "hc > 1" to "hc > 0"
  READ_ASCII hf ~eh~ ELSE ~fail~ (hs * hc)
  PATCH_IF (~%eh%~ STRING_EQUAL ~fail~) BEGIN
    WHILE ((~%eh%~ STRING_EQUAL ~fail~) AND (hc > 0)) BEGIN
      READ_ASCII hf ~eh~ ELSE ~fail~ (hs * hc)
      hc -= 1
    END
  END
  DELETE_BYTES hf (hs * hc)
  hf = 0x72
  WRITE_LONG 0x64 hf
  WRITE_SHORT 0x68 hc
  fb = (0x72 + (hs * hc))
  WRITE_LONG 0x6a fb
  PATCH_IF !(~%eh%~ STRING_EQUAL ~fail~) BEGIN
    INSERT_BYTES hf (hs * hc)
    WRITE_ASCIIE hf ~%eh%~
  END
END ELSE PATCH_IF ((hf != 0x72) AND (hc = 0)) BEGIN
  hf = 0x72
  WRITE_LONG 0x64 hf
END
FOR (i1 = 0; i1 < (hs * hc); i1 += hs) BEGIN
  WRITE_SHORT (hf + i1 + 0x20) fc
  READ_SHORT (hf + i1 + 0x1e) cx
  fc += cx
END
PATCH_IF (SOURCE_SIZE > (0x72 + (hs * hc) + (0x30 * fc))) BEGIN
  DELETE_BYTES (0x72 + (hs * hc) + (0x30 * fc)) (SOURCE_SIZE - (0x72 + (hs * hc) + (0x30 * fc)))
END

// added by Ardanis
WRITE_SHORT 0x6e 0

END // end of function

DEFINE_PATCH_FUNCTION ~ADD_SPELL_HEADER~
  INT_VAR
    type=1
    location=4
    target=1
    target_count=0
    range=0
    required_level=1
    speed=0
    projectile=1

    copy_header=0
    insert_point=~-1~
  STR_VAR
    icon=~~
  RET
    insert_point
BEGIN
  LPF ~FJ_SPL_ITM_REINDEX~ END
  hs=0x28

  READ_LONG 0x64 ho
  READ_SHORT 0x68 hc
  READ_LONG 0x6a eo
  insert_point = (insert_point>hc || insert_point<0) ? hc : insert_point
  copy_header = (copy_header<0) ? 0 : copy_header

  PATCH_IF copy_header>hc BEGIN
    PATCH_WARN ~Unable to copy %copy_header%th header, %SOURCE_FILE% contains only %hc% headers!~
  END ELSE BEGIN
    INSERT_BYTES ho+insert_point*hs hs
    hc+=1
    eo+=hs
    PATCH_IF copy_header BEGIN
      READ_SHORT ho+(copy_header - 1)*hs+0x1e ec
      READ_SHORT ho+(copy_header - 1)*hs+0x20 ei
      READ_ASCII eo+ei*0x30 effs (ec*0x30)
      READ_ASCII ho+(copy_header - 1)*hs copy (hs)
      WRITE_ASCIIE ho+insert_point*hs ~%copy%~ (hs)
    END
    WRITE_SHORT 0x68 hc
    WRITE_LONG 0x6a eo

    READ_SHORT 0x70 ei // technically, it is a counter
    FOR (i=ho;i<ho+hc*hs;i+=hs) BEGIN
      READ_SHORT i+0x1e ec
      WRITE_SHORT i+0x20 ei
      ei+=ec
    END

    PATCH_IF copy_header BEGIN
      READ_SHORT ho+insert_point*hs+0x1e ec
      READ_SHORT ho+insert_point*hs+0x20 ei
      INSERT_BYTES eo+ei*0x30 ec*0x30
      WRITE_ASCIIE eo+ei*0x30 ~%effs%~ (ec*0x30)
    END ELSE BEGIN
      off=ho+insert_point*hs
      WRITE_BYTE off type
      WRITE_BYTE off+0x2 location
      WRITE_ASCIIE off+0x4 ~%icon%~ (8)
      WRITE_BYTE off+0xc target
      WRITE_BYTE off+0xd target_count
      WRITE_SHORT off+0xe range
      WRITE_SHORT off+0x10 required_level
      WRITE_LONG off+0x12 speed
      WRITE_SHORT off+0x26 projectile
    END
  END
END


ACTION_IF GAME_IS ~bgee bg2ee eet~ THEN BEGIN
COPY_EXISTING_REGEXP GLOB ~.+\.spl~ ~override~
  READ_SHORT 0x1c "spell_type"
  READ_SHORT 0x34 "spell_level"
  PATCH_IF spell_type = 2 AND spell_level = 1 BEGIN
	PATCH_PRINT ~%SOURCE_FILE%~
	LPF ADD_SPELL_HEADER  INT_VAR  type=11  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=12  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=13  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1001  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1002  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1003  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1004  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1001  new_opcode = 146  target = 2  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR103~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1001  new_opcode = 146  target = 1  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~RGSPB01~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1001  new_opcode = 148  target = 1  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~RGSPC01~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1001  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1002  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1003  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1004  END	
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 11  new_header_type = 1  location=2  target=1  target_count=0  range=1  min_level=60  STR_VAR  icon = ~SPPR103B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 12  new_header_type = 1  location=2  target=5  target_count=0  range=1  min_level=120  STR_VAR  icon = ~1WDCLWB~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 13  new_header_type = 1  location=2  target=4  target_count=0  range=30  min_level=180  STR_VAR  icon = ~RGSPC01B~  END
	END  BUT_ONLY

COPY_EXISTING_REGEXP GLOB ~.+\.spl~ ~override~
  READ_SHORT 0x1c "spell_type"
  READ_SHORT 0x34 "spell_level"
  PATCH_IF spell_type = 2 AND spell_level = 2 BEGIN
	PATCH_PRINT ~%SOURCE_FILE%~
	LPF ADD_SPELL_HEADER  INT_VAR  type=11  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=12  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=13  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1001  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1002  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1003  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1004  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1001  new_opcode = 146  target = 2  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~RGSPA02~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1001  new_opcode = 146  target = 1  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~RGSPB02~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1001  new_opcode = 148  target = 1  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~RGSPC02~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END	
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1001  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1002  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1003  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1004  END	
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 11  new_header_type = 1  location=2  target=1  target_count=0  range=1  min_level=60  STR_VAR  icon = ~RGSPA02B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 12  new_header_type = 1  location=2  target=5  target_count=0  range=1  min_level=120  STR_VAR  icon = ~RGSPB02B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 13  new_header_type = 1  location=2  target=4  target_count=0  range=30  min_level=180  STR_VAR  icon = ~RGSPC02B~  END
	END  BUT_ONLY

COPY_EXISTING_REGEXP GLOB ~.+\.spl~ ~override~
  READ_SHORT 0x1c "spell_type"
  READ_SHORT 0x34 "spell_level"
  PATCH_IF spell_type = 2 AND spell_level = 3 BEGIN
	PATCH_PRINT ~%SOURCE_FILE%~
	LPF ADD_SPELL_HEADER  INT_VAR  type=11  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=12  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=13  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1001  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1002  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1003  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1004  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1001  new_opcode = 146  target = 2  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR315~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1001  new_opcode = 146  target = 1  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~RGSPB03~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1001  new_opcode = 148  target = 1  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~RGSPC03~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END	
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1001  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1002  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1003  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1004  END	
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 11  new_header_type = 1  location=2  target=1  target_count=0  range=1  min_level=60  STR_VAR  icon = ~SPPR315B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 12  new_header_type = 1  location=2  target=5  target_count=0  range=1  min_level=120  STR_VAR  icon = ~1WDCMWB~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 13  new_header_type = 1  location=2  target=4  target_count=0  range=30  min_level=180  STR_VAR  icon = ~RGSPC03B~  END
	END  BUT_ONLY

COPY_EXISTING_REGEXP GLOB ~.+\.spl~ ~override~
  READ_SHORT 0x1c "spell_type"
  READ_SHORT 0x34 "spell_level"
  PATCH_IF spell_type = 2 AND spell_level = 4 BEGIN
	PATCH_PRINT ~%SOURCE_FILE%~
	LPF ADD_SPELL_HEADER  INT_VAR  type=11  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=12  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=13  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1001  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1002  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1003  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1004  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1001  new_opcode = 146  target = 2  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR401~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1001  new_opcode = 146  target = 1  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR414~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1001  new_opcode = 148  target = 1  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR402~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END	
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1001  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1002  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1003  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1004  END	
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 11  new_header_type = 1  location=2  target=1  target_count=0  range=1  min_level=60  STR_VAR  icon = ~SPPR401B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 12  new_header_type = 1  location=2  target=5  target_count=0  range=1  min_level=120  STR_VAR  icon = ~SPPR414B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 13  new_header_type = 1  location=2  target=4  target_count=0  range=30  min_level=180  STR_VAR  icon = ~SPPR402B~  END
	END  BUT_ONLY

COPY_EXISTING_REGEXP GLOB ~.+\.spl~ ~override~
  READ_SHORT 0x1c "spell_type"
  READ_SHORT 0x34 "spell_level"
  PATCH_IF spell_type = 2 AND spell_level = 5 BEGIN
	PATCH_PRINT ~%SOURCE_FILE%~
	LPF ADD_SPELL_HEADER  INT_VAR  type=11  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=12  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=13  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1001  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1002  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1003  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1004  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1001  new_opcode = 146  target = 2  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR502~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1001  new_opcode = 146  target = 1  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR510~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1001  new_opcode = 148  target = 1  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR501~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END	
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1001  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1002  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1003  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1004  END	
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 11  new_header_type = 1  location=2  target=1  target_count=0  range=1  min_level=60  STR_VAR  icon = ~SPPR502B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 12  new_header_type = 1  location=2  target=5  target_count=0  range=1  min_level=120  STR_VAR  icon = ~SPPR510B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 13  new_header_type = 1  location=2  target=4  target_count=0  range=30  min_level=180  STR_VAR  icon = ~SPPR501B~  END
	END  BUT_ONLY

COPY_EXISTING_REGEXP GLOB ~.+\.spl~ ~override~
  READ_SHORT 0x1c "spell_type"
  READ_SHORT 0x34 "spell_level"
  PATCH_IF spell_type = 2 AND spell_level = 6 BEGIN
	PATCH_PRINT ~%SOURCE_FILE%~
	LPF ADD_SPELL_HEADER  INT_VAR  type=11  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=12  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=13  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1001  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1002  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1003  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1004  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1001  new_opcode = 146  target = 2  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR607~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1001  new_opcode = 146  target = 1  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR608~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1001  new_opcode = 148  target = 1  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR602~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1001  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1002  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1003  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1004  END	
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 11  new_header_type = 1  location=2  target=1  target_count=0  range=1  min_level=60  STR_VAR  icon = ~SPPR607B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 12  new_header_type = 1  location=2  target=5  target_count=0  range=1  min_level=120  STR_VAR  icon = ~SPPR608B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 13  new_header_type = 1  location=2  target=4  target_count=0  range=30  min_level=180  STR_VAR  icon = ~SPPR602B~  END
	END  BUT_ONLY

COPY_EXISTING_REGEXP GLOB ~.+\.spl~ ~override~
  READ_SHORT 0x1c "spell_type"
  READ_SHORT 0x34 "spell_level"
  PATCH_IF spell_type = 2 AND spell_level = 7 BEGIN
	PATCH_PRINT ~%SOURCE_FILE%~
	LPF ADD_SPELL_HEADER  INT_VAR  type=11  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=12  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=13  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1001  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1002  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1003  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1004  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1001  new_opcode = 146  target = 2  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR712~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1001  new_opcode = 146  target = 2  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR708~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1001  new_opcode = 148  target = 1  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR702~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END	
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1001  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1002  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1003  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1004  END	
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 11  new_header_type = 1  location=2  target=3  target_count=0  range=30  min_level=60  STR_VAR  icon = ~SPPR712B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 12  new_header_type = 2  location=2  target=1  target_count=0  range=40  min_level=120  STR_VAR  icon = ~SPPR708B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 13  new_header_type = 1  location=2  target=4  target_count=0  range=30  min_level=180  STR_VAR  icon = ~SPPR702B~  END
	END  BUT_ONLY
END


ACTION_IF GAME_IS ~iwdee~ THEN BEGIN
COPY_EXISTING_REGEXP GLOB ~.+\.spl~ ~override~
  READ_SHORT 0x1c "spell_type"
  READ_SHORT 0x34 "spell_level"
  PATCH_IF spell_type = 2 AND spell_level = 1 BEGIN
	PATCH_PRINT ~%SOURCE_FILE%~
	LPF ADD_SPELL_HEADER  INT_VAR  type=11  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=12  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=13  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1001  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1002  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1003  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1004  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1001  new_opcode = 146  target = 2  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR103~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1001  new_opcode = 146  target = 2  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR114~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1001  new_opcode = 148  target = 1  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~RGSPC01~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END	
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1001  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1002  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1003  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1004  END	
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 11  new_header_type = 1  location=2  target=1  target_count=0  range=1  min_level=60  STR_VAR  icon = ~SPPR103B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 12  new_header_type = 1  location=2  target=1  target_count=0  range=1  min_level=120  STR_VAR  icon = ~SPPR114B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 13  new_header_type = 1  location=2  target=4  target_count=0  range=30  min_level=180  STR_VAR  icon = ~RGSPC01B~  END
	END  BUT_ONLY

COPY_EXISTING_REGEXP GLOB ~.+\.spl~ ~override~
  READ_SHORT 0x1c "spell_type"
  READ_SHORT 0x34 "spell_level"
  PATCH_IF spell_type = 2 AND spell_level = 2 BEGIN
	PATCH_PRINT ~%SOURCE_FILE%~
	LPF ADD_SPELL_HEADER  INT_VAR  type=11  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=12  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=13  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1001  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1002  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1003  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1004  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1001  new_opcode = 146  target = 2  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR217~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1001  new_opcode = 146  target = 2  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR220~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1001  new_opcode = 148  target = 1  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~RGSPC02~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END	
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1001  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1002  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1003  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1004  END	
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 11  new_header_type = 1  location=2  target=1  target_count=0  range=1  min_level=60  STR_VAR  icon = ~SPPR217B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 12  new_header_type = 1  location=2  target=1  target_count=0  range=1  min_level=120  STR_VAR  icon = ~SPPR220B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 13  new_header_type = 1  location=2  target=4  target_count=0  range=30  min_level=180  STR_VAR  icon = ~RGSPC02B~  END
	END  BUT_ONLY

COPY_EXISTING_REGEXP GLOB ~.+\.spl~ ~override~
  READ_SHORT 0x1c "spell_type"
  READ_SHORT 0x34 "spell_level"
  PATCH_IF spell_type = 2 AND spell_level = 3 BEGIN
	PATCH_PRINT ~%SOURCE_FILE%~
	LPF ADD_SPELL_HEADER  INT_VAR  type=11  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=12  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=13  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1001  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1002  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1003  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1004  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1001  new_opcode = 146  target = 2  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR315~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1001  new_opcode = 146  target = 2  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR330~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1001  new_opcode = 148  target = 1  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~RGSPC03~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END	
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1001  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1002  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1003  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1004  END	
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 11  new_header_type = 1  location=2  target=1  target_count=0  range=1  min_level=60  STR_VAR  icon = ~SPPR315B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 12  new_header_type = 1  location=2  target=1  target_count=0  range=1  min_level=120  STR_VAR  icon = ~SPPR330B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 13  new_header_type = 1  location=2  target=4  target_count=0  range=30  min_level=180  STR_VAR  icon = ~RGSPC03B~  END
	END  BUT_ONLY

COPY_EXISTING_REGEXP GLOB ~.+\.spl~ ~override~
  READ_SHORT 0x1c "spell_type"
  READ_SHORT 0x34 "spell_level"
  PATCH_IF spell_type = 2 AND spell_level = 4 BEGIN
	PATCH_PRINT ~%SOURCE_FILE%~
	LPF ADD_SPELL_HEADER  INT_VAR  type=11  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=12  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=13  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1001  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1002  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1003  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1004  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1001  new_opcode = 146  target = 2  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR401~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1001  new_opcode = 146  target = 2  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR414~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1001  new_opcode = 148  target = 1  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR402~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END	
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1001  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1002  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1003  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1004  END	
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 11  new_header_type = 1  location=2  target=1  target_count=0  range=1  min_level=60  STR_VAR  icon = ~SPPR401B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 12  new_header_type = 1  location=2  target=1  target_count=0  range=1  min_level=120  STR_VAR  icon = ~SPPR414B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 13  new_header_type = 1  location=2  target=4  target_count=0  range=30  min_level=180  STR_VAR  icon = ~SPPR402B~  END
	END  BUT_ONLY

COPY_EXISTING_REGEXP GLOB ~.+\.spl~ ~override~
  READ_SHORT 0x1c "spell_type"
  READ_SHORT 0x34 "spell_level"
  PATCH_IF spell_type = 2 AND spell_level = 5 BEGIN
	PATCH_PRINT ~%SOURCE_FILE%~
	LPF ADD_SPELL_HEADER  INT_VAR  type=11  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=12  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=13  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1001  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1002  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1003  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1004  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1001  new_opcode = 146  target = 2  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR502~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1001  new_opcode = 146  target = 2  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR510~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1001  new_opcode = 148  target = 1  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR501~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END	
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1001  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1002  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1003  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1004  END	
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 11  new_header_type = 1  location=2  target=1  target_count=0  range=1  min_level=60  STR_VAR  icon = ~SPPR502B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 12  new_header_type = 1  location=2  target=1  target_count=0  range=1  min_level=120  STR_VAR  icon = ~SPPR510B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 13  new_header_type = 1  location=2  target=4  target_count=0  range=30  min_level=180  STR_VAR  icon = ~SPPR501B~  END
	END  BUT_ONLY

COPY_EXISTING_REGEXP GLOB ~.+\.spl~ ~override~
  READ_SHORT 0x1c "spell_type"
  READ_SHORT 0x34 "spell_level"
  PATCH_IF spell_type = 2 AND spell_level = 6 BEGIN
	PATCH_PRINT ~%SOURCE_FILE%~
	LPF ADD_SPELL_HEADER  INT_VAR  type=11  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=12  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=13  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1001  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1002  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1003  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1004  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1001  new_opcode = 146  target = 2  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR607~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1001  new_opcode = 146  target = 2  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR608~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1001  new_opcode = 148  target = 1  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR602~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END	
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1001  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1002  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1003  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1004  END	
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 11  new_header_type = 1  location=2  target=1  target_count=0  range=1  min_level=60  STR_VAR  icon = ~SPPR607B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 12  new_header_type = 1  location=2  target=1  target_count=0  range=1  min_level=120  STR_VAR  icon = ~SPPR608B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 13  new_header_type = 1  location=2  target=4  target_count=0  range=30  min_level=180  STR_VAR  icon = ~SPPR602B~  END
	END  BUT_ONLY

COPY_EXISTING_REGEXP GLOB ~.+\.spl~ ~override~
  READ_SHORT 0x1c "spell_type"
  READ_SHORT 0x34 "spell_level"
  PATCH_IF spell_type = 2 AND spell_level = 7 BEGIN
	PATCH_PRINT ~%SOURCE_FILE%~
	LPF ADD_SPELL_HEADER  INT_VAR  type=11  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=12  END
	LPF ADD_SPELL_HEADER  INT_VAR  type=13  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1001  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1002  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1003  END
	LPF ADD_SPELL_EFFECT  INT_VAR  opcode = 1004  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1001  new_opcode = 146  target = 2  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR712~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 11  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1001  new_opcode = 146  target = 2  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR708~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 12  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1001  new_opcode = 148  target = 1  parameter1 = 1  timing = 1  resist_dispel = 2  STR_VAR  resource = ~SPPR702~  END
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1002  new_opcode = 191  target = 1  parameter2 = 1  timing = 1  resist_dispel = 2  END		
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1003  new_opcode = 188  target = 1                  timing = 1  resist_dispel = 2  END	
	LPF ALTER_SPELL_EFFECT  INT_VAR  header_type = 13  match_opcode = 1004  new_opcode = 279  target = 1  parameter2 = 13 timing = 1  resist_dispel = 2  END	
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1001  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1002  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1003  END
	LPF DELETE_SPELL_EFFECT  INT_VAR  opcode_to_delete = 1004  END	
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 11  new_header_type = 1  location=2  target=3  target_count=0  range=30  min_level=60  STR_VAR  icon = ~SPPR712B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 12  new_header_type = 1  location=2  target=1  target_count=0  range=40  min_level=120  STR_VAR  icon = ~SPPR708B~  END
	LPF ALTER_SPELL_HEADER  INT_VAR  header_type = 13  new_header_type = 1  location=2  target=4  target_count=0  range=30  min_level=180  STR_VAR  icon = ~SPPR702B~  END
	END  BUT_ONLY
END

/////////////////////////////////////////////////////////////////////////////////
////// MAGIC FANG
/////////////////////////////////////////////////////////////////////////////////

BEGIN @102

REQUIRE_PREDICATE GAME_IS ~bgee bg2ee iwdee eet~ @100

COPY ~Spontaneous_Casting/magic_fang/rgmfang.spl~ ~override~
  	SAY NAME1 @31
  	SAY UNIDENTIFIED_DESC @32

COPY ~Spontaneous_Casting/magic_fang/rgmfngg.spl~ ~override~
  	SAY NAME1 @33
  	SAY UNIDENTIFIED_DESC @34
	
COPY ~Spontaneous_Casting/magic_fang/rgmfv10.eff~ ~override~
COPY ~Spontaneous_Casting/magic_fang/rgmfv10.eff~ ~override/rgmfv11.eff~	WRITE_ASCII 0x30 ~RGMFW11~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv10.eff~ ~override/rgmfv12.eff~	WRITE_ASCII 0x30 ~RGMFW12~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv10.eff~ ~override/rgmfv13.eff~	WRITE_ASCII 0x30 ~RGMFW13~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv10.eff~ ~override/rgmfv14.eff~	WRITE_ASCII 0x30 ~RGMFW14~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv10.eff~ ~override/rgmfv15.eff~	WRITE_ASCII 0x30 ~RGMFW15~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv10.eff~ ~override/rgmfv16.eff~	WRITE_ASCII 0x30 ~RGMFW16~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv10.eff~ ~override/rgmfv17.eff~	WRITE_ASCII 0x30 ~RGMFW17~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv10.eff~ ~override/rgmfv18.eff~	WRITE_ASCII 0x30 ~RGMFW18~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv10.eff~ ~override/rgmfv19.eff~	WRITE_ASCII 0x30 ~RGMFW19~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override~
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv21.eff~	WRITE_ASCII 0x30 ~RGMFW21~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv22.eff~	WRITE_ASCII 0x30 ~RGMFW22~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv23.eff~	WRITE_ASCII 0x30 ~RGMFW23~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv24.eff~	WRITE_ASCII 0x30 ~RGMFW24~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv25.eff~	WRITE_ASCII 0x30 ~RGMFW25~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv26.eff~	WRITE_ASCII 0x30 ~RGMFW26~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv27.eff~	WRITE_ASCII 0x30 ~RGMFW27~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv28.eff~	WRITE_ASCII 0x30 ~RGMFW28~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv29.eff~	WRITE_ASCII 0x30 ~RGMFW29~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv30.eff~	WRITE_ASCII 0x30 ~RGMFW30~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv31.eff~	WRITE_ASCII 0x30 ~RGMFW31~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv32.eff~	WRITE_ASCII 0x30 ~RGMFW32~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv33.eff~	WRITE_ASCII 0x30 ~RGMFW33~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv34.eff~	WRITE_ASCII 0x30 ~RGMFW34~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv35.eff~	WRITE_ASCII 0x30 ~RGMFW35~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv36.eff~	WRITE_ASCII 0x30 ~RGMFW36~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv37.eff~	WRITE_ASCII 0x30 ~RGMFW37~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv38.eff~	WRITE_ASCII 0x30 ~RGMFW38~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv39.eff~	WRITE_ASCII 0x30 ~RGMFW39~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv40.eff~	WRITE_ASCII 0x30 ~RGMFW40~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv41.eff~	WRITE_ASCII 0x30 ~RGMFW41~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv42.eff~	WRITE_ASCII 0x30 ~RGMFW42~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv43.eff~	WRITE_ASCII 0x30 ~RGMFW43~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv44.eff~	WRITE_ASCII 0x30 ~RGMFW44~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv45.eff~	WRITE_ASCII 0x30 ~RGMFW45~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv46.eff~	WRITE_ASCII 0x30 ~RGMFW46~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv47.eff~	WRITE_ASCII 0x30 ~RGMFW47~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv48.eff~	WRITE_ASCII 0x30 ~RGMFW48~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv49.eff~	WRITE_ASCII 0x30 ~RGMFW49~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv50.eff~	WRITE_ASCII 0x30 ~RGMFW50~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv51.eff~	WRITE_ASCII 0x30 ~RGMFW51~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv52.eff~	WRITE_ASCII 0x30 ~RGMFW52~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv53.eff~	WRITE_ASCII 0x30 ~RGMFW53~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv54.eff~	WRITE_ASCII 0x30 ~RGMFW54~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv55.eff~	WRITE_ASCII 0x30 ~RGMFW55~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv56.eff~	WRITE_ASCII 0x30 ~RGMFW56~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv57.eff~	WRITE_ASCII 0x30 ~RGMFW57~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv58.eff~	WRITE_ASCII 0x30 ~RGMFW58~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfv20.eff~ ~override/rgmfv59.eff~	WRITE_ASCII 0x30 ~RGMFW59~ #8	
COPY ~Spontaneous_Casting/magic_fang/rgmfw10.eff~ ~override~
COPY ~Spontaneous_Casting/magic_fang/rgmfw10.eff~ ~override/rgmfw11.eff~	WRITE_ASCII 0x30 ~RGMFW11~ #8	
COPY ~Spontaneous_Casting/magic_fang/rgmfw10.eff~ ~override/rgmfw12.eff~	WRITE_ASCII 0x30 ~RGMFW12~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw10.eff~ ~override/rgmfw13.eff~	WRITE_ASCII 0x30 ~RGMFW13~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw10.eff~ ~override/rgmfw14.eff~	WRITE_ASCII 0x30 ~RGMFW14~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw10.eff~ ~override/rgmfw15.eff~	WRITE_ASCII 0x30 ~RGMFW15~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw10.eff~ ~override/rgmfw16.eff~	WRITE_ASCII 0x30 ~RGMFW16~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw10.eff~ ~override/rgmfw17.eff~	WRITE_ASCII 0x30 ~RGMFW17~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw10.eff~ ~override/rgmfw18.eff~	WRITE_ASCII 0x30 ~RGMFW18~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw10.eff~ ~override/rgmfw19.eff~	WRITE_ASCII 0x30 ~RGMFW19~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override~
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw21.eff~	WRITE_ASCII 0x30 ~RGMFW21~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw22.eff~	WRITE_ASCII 0x30 ~RGMFW22~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw23.eff~	WRITE_ASCII 0x30 ~RGMFW23~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw24.eff~	WRITE_ASCII 0x30 ~RGMFW24~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw25.eff~	WRITE_ASCII 0x30 ~RGMFW25~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw26.eff~	WRITE_ASCII 0x30 ~RGMFW26~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw27.eff~	WRITE_ASCII 0x30 ~RGMFW27~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw28.eff~	WRITE_ASCII 0x30 ~RGMFW28~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw29.eff~	WRITE_ASCII 0x30 ~RGMFW29~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw30.eff~	WRITE_ASCII 0x30 ~RGMFW30~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw31.eff~	WRITE_ASCII 0x30 ~RGMFW31~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw32.eff~	WRITE_ASCII 0x30 ~RGMFW32~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw33.eff~	WRITE_ASCII 0x30 ~RGMFW33~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw34.eff~	WRITE_ASCII 0x30 ~RGMFW34~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw35.eff~	WRITE_ASCII 0x30 ~RGMFW35~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw36.eff~	WRITE_ASCII 0x30 ~RGMFW36~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw37.eff~	WRITE_ASCII 0x30 ~RGMFW37~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw38.eff~	WRITE_ASCII 0x30 ~RGMFW38~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw39.eff~	WRITE_ASCII 0x30 ~RGMFW39~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw40.eff~	WRITE_ASCII 0x30 ~RGMFW40~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw41.eff~	WRITE_ASCII 0x30 ~RGMFW41~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw42.eff~	WRITE_ASCII 0x30 ~RGMFW42~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw43.eff~	WRITE_ASCII 0x30 ~RGMFW43~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw44.eff~	WRITE_ASCII 0x30 ~RGMFW44~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw45.eff~	WRITE_ASCII 0x30 ~RGMFW45~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw46.eff~	WRITE_ASCII 0x30 ~RGMFW46~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw47.eff~	WRITE_ASCII 0x30 ~RGMFW47~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw48.eff~	WRITE_ASCII 0x30 ~RGMFW48~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw49.eff~	WRITE_ASCII 0x30 ~RGMFW49~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw50.eff~	WRITE_ASCII 0x30 ~RGMFW50~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw51.eff~	WRITE_ASCII 0x30 ~RGMFW51~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw52.eff~	WRITE_ASCII 0x30 ~RGMFW52~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw53.eff~	WRITE_ASCII 0x30 ~RGMFW53~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw54.eff~	WRITE_ASCII 0x30 ~RGMFW54~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw55.eff~	WRITE_ASCII 0x30 ~RGMFW55~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw56.eff~	WRITE_ASCII 0x30 ~RGMFW56~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw57.eff~	WRITE_ASCII 0x30 ~RGMFW57~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw58.eff~	WRITE_ASCII 0x30 ~RGMFW58~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw20.eff~ ~override/rgmfw59.eff~	WRITE_ASCII 0x30 ~RGMFW59~ #8
COPY ~Spontaneous_Casting/magic_fang/rgmfw10.itm~ ~override~
COPY ~Spontaneous_Casting/magic_fang/rgmfw11.itm~ ~override~
COPY ~Spontaneous_Casting/magic_fang/rgmfw12.itm~ ~override~
COPY ~Spontaneous_Casting/magic_fang/rgmfw13.itm~ ~override~
COPY ~Spontaneous_Casting/magic_fang/rgmfw14.itm~ ~override~
COPY ~Spontaneous_Casting/magic_fang/rgmfw15.itm~ ~override~
COPY ~Spontaneous_Casting/magic_fang/rgmfw16.itm~ ~override~
COPY ~Spontaneous_Casting/magic_fang/rgmfw17.itm~ ~override~
COPY ~Spontaneous_Casting/magic_fang/rgmfw18.itm~ ~override~
COPY ~Spontaneous_Casting/magic_fang/rgmfw19.itm~ ~override~
COPY ~Spontaneous_Casting/magic_fang/rgmfw10.itm~ ~override/rgmfw20.itm~	WRITE_SHORT 0x60 2	WRITE_SHORT 0x86 2	WRITE_SHORT 0x8c 2
COPY ~Spontaneous_Casting/magic_fang/rgmfw11.itm~ ~override/rgmfw21.itm~	WRITE_SHORT 0x60 3	WRITE_SHORT 0x86 2	WRITE_SHORT 0x8c 2
COPY ~Spontaneous_Casting/magic_fang/rgmfw12.itm~ ~override/rgmfw22.itm~	WRITE_SHORT 0x60 2	WRITE_SHORT 0x86 2	WRITE_SHORT 0x8c 2
COPY ~Spontaneous_Casting/magic_fang/rgmfw13.itm~ ~override/rgmfw23.itm~	WRITE_SHORT 0x60 2	WRITE_SHORT 0x86 2	WRITE_SHORT 0x8c 2
COPY ~Spontaneous_Casting/magic_fang/rgmfw14.itm~ ~override/rgmfw24.itm~	WRITE_SHORT 0x60 3	WRITE_SHORT 0x86 2	WRITE_SHORT 0x8c 2
COPY ~Spontaneous_Casting/magic_fang/rgmfw15.itm~ ~override/rgmfw25.itm~	WRITE_SHORT 0x60 4	WRITE_SHORT 0x86 2	WRITE_SHORT 0x8c 2
COPY ~Spontaneous_Casting/magic_fang/rgmfw16.itm~ ~override/rgmfw26.itm~	WRITE_SHORT 0x60 3	WRITE_SHORT 0x86 2	WRITE_SHORT 0x8c 2
COPY ~Spontaneous_Casting/magic_fang/rgmfw17.itm~ ~override/rgmfw27.itm~	WRITE_SHORT 0x60 3	WRITE_SHORT 0x86 2	WRITE_SHORT 0x8c 2
COPY ~Spontaneous_Casting/magic_fang/rgmfw18.itm~ ~override/rgmfw28.itm~	WRITE_SHORT 0x60 4	WRITE_SHORT 0x86 2	WRITE_SHORT 0x8c 2
COPY ~Spontaneous_Casting/magic_fang/rgmfw19.itm~ ~override/rgmfw29.itm~	WRITE_SHORT 0x60 5	WRITE_SHORT 0x86 2	WRITE_SHORT 0x8c 2
COPY ~Spontaneous_Casting/magic_fang/rgmfw10.itm~ ~override/rgmfw30.itm~	WRITE_SHORT 0x60 3	WRITE_SHORT 0x86 3	WRITE_SHORT 0x8c 3
COPY ~Spontaneous_Casting/magic_fang/rgmfw11.itm~ ~override/rgmfw31.itm~	WRITE_SHORT 0x60 4	WRITE_SHORT 0x86 3	WRITE_SHORT 0x8c 3
COPY ~Spontaneous_Casting/magic_fang/rgmfw12.itm~ ~override/rgmfw32.itm~	WRITE_SHORT 0x60 3	WRITE_SHORT 0x86 3	WRITE_SHORT 0x8c 3
COPY ~Spontaneous_Casting/magic_fang/rgmfw13.itm~ ~override/rgmfw33.itm~	WRITE_SHORT 0x60 3	WRITE_SHORT 0x86 3	WRITE_SHORT 0x8c 3
COPY ~Spontaneous_Casting/magic_fang/rgmfw14.itm~ ~override/rgmfw34.itm~	WRITE_SHORT 0x60 4	WRITE_SHORT 0x86 3	WRITE_SHORT 0x8c 3
COPY ~Spontaneous_Casting/magic_fang/rgmfw15.itm~ ~override/rgmfw35.itm~	WRITE_SHORT 0x60 5	WRITE_SHORT 0x86 3	WRITE_SHORT 0x8c 3
COPY ~Spontaneous_Casting/magic_fang/rgmfw16.itm~ ~override/rgmfw36.itm~	WRITE_SHORT 0x60 4	WRITE_SHORT 0x86 3	WRITE_SHORT 0x8c 3
COPY ~Spontaneous_Casting/magic_fang/rgmfw17.itm~ ~override/rgmfw37.itm~	WRITE_SHORT 0x60 4	WRITE_SHORT 0x86 3	WRITE_SHORT 0x8c 3
COPY ~Spontaneous_Casting/magic_fang/rgmfw18.itm~ ~override/rgmfw38.itm~	WRITE_SHORT 0x60 5	WRITE_SHORT 0x86 3	WRITE_SHORT 0x8c 3
COPY ~Spontaneous_Casting/magic_fang/rgmfw19.itm~ ~override/rgmfw39.itm~	WRITE_SHORT 0x60 5	WRITE_SHORT 0x86 3	WRITE_SHORT 0x8c 3
COPY ~Spontaneous_Casting/magic_fang/rgmfw10.itm~ ~override/rgmfw40.itm~	WRITE_SHORT 0x60 4	WRITE_SHORT 0x86 4	WRITE_SHORT 0x8c 4
COPY ~Spontaneous_Casting/magic_fang/rgmfw11.itm~ ~override/rgmfw41.itm~	WRITE_SHORT 0x60 5	WRITE_SHORT 0x86 4	WRITE_SHORT 0x8c 4
COPY ~Spontaneous_Casting/magic_fang/rgmfw12.itm~ ~override/rgmfw42.itm~	WRITE_SHORT 0x60 4	WRITE_SHORT 0x86 4	WRITE_SHORT 0x8c 4
COPY ~Spontaneous_Casting/magic_fang/rgmfw13.itm~ ~override/rgmfw43.itm~	WRITE_SHORT 0x60 4	WRITE_SHORT 0x86 4	WRITE_SHORT 0x8c 4
COPY ~Spontaneous_Casting/magic_fang/rgmfw14.itm~ ~override/rgmfw44.itm~	WRITE_SHORT 0x60 5	WRITE_SHORT 0x86 4	WRITE_SHORT 0x8c 4
COPY ~Spontaneous_Casting/magic_fang/rgmfw15.itm~ ~override/rgmfw45.itm~	WRITE_SHORT 0x60 5	WRITE_SHORT 0x86 4	WRITE_SHORT 0x8c 4
COPY ~Spontaneous_Casting/magic_fang/rgmfw16.itm~ ~override/rgmfw46.itm~	WRITE_SHORT 0x60 5	WRITE_SHORT 0x86 4	WRITE_SHORT 0x8c 4
COPY ~Spontaneous_Casting/magic_fang/rgmfw17.itm~ ~override/rgmfw47.itm~	WRITE_SHORT 0x60 5	WRITE_SHORT 0x86 4	WRITE_SHORT 0x8c 4
COPY ~Spontaneous_Casting/magic_fang/rgmfw18.itm~ ~override/rgmfw48.itm~	WRITE_SHORT 0x60 5	WRITE_SHORT 0x86 4	WRITE_SHORT 0x8c 4
COPY ~Spontaneous_Casting/magic_fang/rgmfw19.itm~ ~override/rgmfw49.itm~	WRITE_SHORT 0x60 5	WRITE_SHORT 0x86 4	WRITE_SHORT 0x8c 4
COPY ~Spontaneous_Casting/magic_fang/rgmfw10.itm~ ~override/rgmfw50.itm~	WRITE_SHORT 0x60 5	WRITE_SHORT 0x86 5	WRITE_SHORT 0x8c 5
COPY ~Spontaneous_Casting/magic_fang/rgmfw11.itm~ ~override/rgmfw51.itm~	WRITE_SHORT 0x60 5	WRITE_SHORT 0x86 5	WRITE_SHORT 0x8c 5
COPY ~Spontaneous_Casting/magic_fang/rgmfw12.itm~ ~override/rgmfw52.itm~	WRITE_SHORT 0x60 5	WRITE_SHORT 0x86 5	WRITE_SHORT 0x8c 5
COPY ~Spontaneous_Casting/magic_fang/rgmfw13.itm~ ~override/rgmfw53.itm~	WRITE_SHORT 0x60 5	WRITE_SHORT 0x86 5	WRITE_SHORT 0x8c 5
COPY ~Spontaneous_Casting/magic_fang/rgmfw14.itm~ ~override/rgmfw54.itm~	WRITE_SHORT 0x60 5	WRITE_SHORT 0x86 5	WRITE_SHORT 0x8c 5
COPY ~Spontaneous_Casting/magic_fang/rgmfw15.itm~ ~override/rgmfw55.itm~	WRITE_SHORT 0x60 5	WRITE_SHORT 0x86 5	WRITE_SHORT 0x8c 5
COPY ~Spontaneous_Casting/magic_fang/rgmfw16.itm~ ~override/rgmfw56.itm~	WRITE_SHORT 0x60 5	WRITE_SHORT 0x86 5	WRITE_SHORT 0x8c 5
COPY ~Spontaneous_Casting/magic_fang/rgmfw17.itm~ ~override/rgmfw57.itm~	WRITE_SHORT 0x60 5	WRITE_SHORT 0x86 5	WRITE_SHORT 0x8c 5
COPY ~Spontaneous_Casting/magic_fang/rgmfw18.itm~ ~override/rgmfw58.itm~	WRITE_SHORT 0x60 5	WRITE_SHORT 0x86 5	WRITE_SHORT 0x8c 5
COPY ~Spontaneous_Casting/magic_fang/rgmfw19.itm~ ~override/rgmfw59.itm~	WRITE_SHORT 0x60 5	WRITE_SHORT 0x86 5	WRITE_SHORT 0x8c 5

ACTION_IF GAME_IS ~bgee bg2ee eet~ THEN BEGIN
COPY ~Spontaneous_Casting/magic_fang/rgmfangb.bam~ ~override~
COPY ~Spontaneous_Casting/magic_fang/rgmfangc.bam~ ~override~
COPY ~Spontaneous_Casting/magic_fang/rgmfnggb.bam~ ~override~
COPY ~Spontaneous_Casting/magic_fang/rgmfnggc.bam~ ~override~
END

ACTION_IF GAME_IS ~iwdee~ THEN BEGIN
COPY ~Spontaneous_Casting/iwd_bam/rgmfangb.bam~ ~override~
COPY ~Spontaneous_Casting/iwd_bam/rgmfangc.bam~ ~override~
COPY ~Spontaneous_Casting/iwd_bam/rgmfnggb.bam~ ~override~
COPY ~Spontaneous_Casting/iwd_bam/rgmfnggc.bam~ ~override~
END

COPY_EXISTING ~catjagsu.cre~ ~override~
	WRITE_SHORT 0x273 200

APPEND ~CLABDR01.2da~
~ABILIRG3 GA_RGMFANG **** **** **** GA_RGMFNGG **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** ****~

COPY_EXISTING - ~KITLIST.2DA~ ~override~
  PRETTY_PRINT_2DA
  COUNT_2DA_ROWS 10 "cntrow"
  FOR (cnt = 0; cnt < "%cntrow%"; cnt = cnt + 1) BEGIN
    READ_2DA_ENTRY cnt 5 10 "clab"
    READ_2DA_ENTRY cnt 8 10 "class"
    PATCH_IF (IS_AN_INT ~%class%~) BEGIN
      PATCH_IF (class = 11) AND (FILE_EXISTS_IN_GAME ~%clab%.2DA~) AND (NOT FILE_CONTAINS_EVALUATED (~%clab%.2DA~ ~RGMFANG~)) BEGIN
        INNER_ACTION BEGIN
          COPY_EXISTING ~%clab%.2DA~ ~override~
            PATCH_PRINT ~Patching %clab%.2DA~
			APPEND ~%clab%.2DA~
			~ABILIRG3 GA_RGMFANG **** **** **** GA_RGMFNGG **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** ****~
        END
      END
    END
  END
